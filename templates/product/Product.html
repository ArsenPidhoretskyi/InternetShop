{% extends 'base.html' %}
{% load static %}

{% block title %}{{ product.name }}{% endblock title %}
{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/product.css' %}">
{% endblock stylesheets %}

{% block content %}
    <div class="d-flex flex-row justify-content-center align-items-center border-0 mt-5 mx-2 card box py-5">
        <div class="col-xl-6 col-lg-12">
            <img class="img-fluid rounded mx-auto d-block" src="{{ product.image.url }}" alt=""/>
        </div>

        <div class="col-xl-6 col-lg-12">
            <div class="product mx-auto">
                <span class="category"></span>
                <p class="fw-bold name">{{ product.name }}</p>
                <p class="fw-normal description">{{ product.description }}</p>

                <div class="product-price mx-auto cart-btn">
                    <button class="btn btn-success btn-lg mt-3 add-to-cart" value="{{ product.id }}">
                        {{ product.calculated_price }}$ <i class="fa fa-shopping-cart"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}

{% block javascripts %}
    <script>
        $("button.add-to-cart").click(function (e) {
            e.preventDefault();
            $.ajax({
                type: "POST",
                url: "{% url 'add_to_cart' %}",
                data: {
                    id: $(this).val(), // < note use of 'this' here
                    csrfmiddlewaretoken: "{{ csrf_token }}"
                },
                success: function (result) {
                },
                error: function (result) {
                }
            });
        });
    </script>
{% endblock javascripts %}